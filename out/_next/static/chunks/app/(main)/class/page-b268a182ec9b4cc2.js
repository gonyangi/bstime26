(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[660],{1834:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>x,Es:()=>u,L3:()=>f,c7:()=>m,lG:()=>i});var s=a(5155),r=a(2115),l=a(7283),n=a(6615),d=a(4269);let i=l.bL;l.l9;let o=l.ZL;l.bm;let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.hJ,{ref:t,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});c.displayName=l.hJ.displayName;let x=r.forwardRef((e,t)=>{let{className:a,children:r,...i}=e;return(0,s.jsxs)(o,{children:[(0,s.jsx)(c,{}),(0,s.jsxs)(l.UC,{ref:t,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...i,children:[r,(0,s.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(n.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=l.UC.displayName;let m=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};m.displayName="DialogHeader";let u=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};u.displayName="DialogFooter";let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.hE,{ref:t,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});f.displayName=l.hE.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.VY,{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",a),...r})}).displayName=l.VY.displayName},5142:(e,t,a)=>{"use strict";a.d(t,{p:()=>n});var s=a(5155),r=a(2115),l=a(4269);let n=r.forwardRef((e,t)=>{let{className:a,type:r,...n}=e;return(0,s.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});n.displayName="Input"},5964:(e,t,a)=>{Promise.resolve().then(a.bind(a,9925))},6948:(e,t,a)=>{"use strict";a.d(t,{Wu:()=>d,Zp:()=>n});var s=a(5155),r=a(2115),l=a(4269);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});n.displayName="Card",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...r})}).displayName="CardHeader",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})}).displayName="CardTitle",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})}).displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",a),...r})});d.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},9925:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>C});var s=a(5155),r=a(2115),l=a(63),n=a(3998),d=a(6948),i=a(6549);let o=(0,a(4294).A)("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);var c=a(3630),x=a(243),m=a(4269),u=a(6344),f=a(9708);let p=r.forwardRef((e,t)=>{let a=(0,u.jt)(),l="artifacts/".concat(u.R0,"/public/data"),{data:n,loading:d}=(0,u.Ge)((0,r.useMemo)(()=>a?(0,f.P)((0,f.rJ)(a,l,"fixedData")):null,[a])),o=(0,r.useMemo)(()=>n?Object.fromEntries(n.map(e=>[e.id,e.val])):{},[n]),{data:c,loading:m}=(0,u.Ge)((0,r.useMemo)(()=>a?(0,f.P)((0,f.rJ)(a,l,"classSubjects")):null,[a])),p=(0,r.useMemo)(()=>c?Object.fromEntries(c.map(e=>[e.id,e.val])):{},[c]);return d||m?(0,s.jsx)("div",{ref:t,className:"p-4 print-area",children:(0,s.jsx)(x.E,{className:"w-full h-[100vh]"})}):(0,s.jsxs)("div",{ref:t,className:"print-area",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-center mb-8",children:"봉선초등학교 전학급 시간표 통합 리포트"}),i.Nv.map(e=>(0,s.jsxs)("div",{className:"page-break",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold mb-4 text-center border-b-2 pb-2 mt-8 text-gray-800",children:[e," 시간표"]}),(0,s.jsxs)("table",{className:"w-full text-center border-collapse table-fixed",children:[(0,s.jsx)("thead",{className:"bg-gray-100",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"p-2 border border-black w-24 text-center",children:"교시"}),i.qn.map(e=>(0,s.jsx)("th",{className:"border border-black w-1/5",children:i.Rl[e]},e))]})}),(0,s.jsx)("tbody",{children:i.nR.map(t=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"p-2 border border-black font-bold text-gray-600 text-center",children:i.kl[t]}),i.qn.map(a=>{let r="";Object.entries(o).forEach(s=>{let[l,n]=s;if(n===e&&l.includes("-".concat(a,"-").concat(t))){let e=l.split("-")[0];i.pR[e]&&(r=i.pR[e])}});let l=p["".concat(e,"-").concat(a,"-").concat(t)]||"";return(0,s.jsxs)("td",{className:"p-2 border border-black min-h-[60px] text-center break-words align-top",children:[(0,s.jsx)("div",{className:"text-[10px] text-blue-600 font-bold",children:r}),(0,s.jsx)("div",{className:"text-base font-bold text-gray-800 mt-1",children:l})]},a)})]},t))})]})]},e))]})});p.displayName="PrintableContent";let h=e=>{let{children:t}=e;return(0,s.jsxs)("div",{children:[(0,r.cloneElement)(t,{onClick:()=>{window.print()}}),(0,s.jsx)("div",{className:"hidden",children:(0,s.jsx)(p,{})})]})};var b=a(1834),g=a(5142),j=a(5894),N=a(9516);function v(e){let{currentClass:t,onSelectClass:a}=e;return(0,s.jsx)(d.Zp,{className:"mb-4 shadow border border-green-100",children:(0,s.jsxs)(d.Wu,{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h3",{className:"font-bold text-gray-700 text-xl",children:"학급 선택"}),(0,s.jsx)(h,{children:(0,s.jsxs)(n.$,{className:"bg-green-600 hover:bg-green-700 text-white shadow-md",children:[(0,s.jsx)(o,{className:"mr-2 h-4 w-4"})," 전학급 인쇄/PDF"]})})]}),(0,s.jsx)("div",{className:"grid grid-cols-7 sm:grid-cols-14 gap-1",children:i.Nv.map(e=>(0,s.jsx)(n.$,{onClick:()=>a(e),variant:"outline",className:(0,m.cn)("p-2 text-sm font-medium transition-all",t===e?"border-green-600 bg-green-50 text-green-700 font-bold shadow-sm":"bg-white hover:border-green-500"),children:e},e))})]})})}function y(e){let{isOpen:t,onClose:a,subjectKey:l,currentValue:d,currentClass:i}=e,[o,c]=(0,r.useState)(""),{toast:x}=(0,j.dj)(),[m,f]=(0,r.useTransition)(),p=(0,u.jt)();r.useEffect(()=>{t&&c(d)},[t,d]);let h=()=>{l&&f(async()=>{try{await (0,N.jN)(p,l,o),x({title:"저장되었습니다."}),a()}catch(e){console.error(e),x({title:"저장 실패",variant:"destructive"})}})};return t&&l?(0,s.jsx)(b.lG,{open:t,onOpenChange:a,children:(0,s.jsxs)(b.Cf,{children:[(0,s.jsx)(b.c7,{children:(0,s.jsx)(b.L3,{children:"과목 입력"})}),(0,s.jsxs)("p",{className:"text-lg text-gray-500 mb-2 font-bold",children:[i," 학급 교과목"]}),(0,s.jsx)(g.p,{value:o,onChange:e=>c(e.target.value),placeholder:"과목 입력 후 Enter",className:"text-2xl font-bold h-14",onKeyDown:e=>{"Enter"===e.key&&h()}}),(0,s.jsxs)(b.Es,{children:[(0,s.jsx)(n.$,{variant:"outline",onClick:a,children:"취소"}),(0,s.jsx)(n.$,{onClick:h,disabled:m,children:m?"저장 중":"저장"})]})]})}):null}function w(e){let{currentClass:t}=e,a=(0,u.jt)(),{toast:l}=(0,j.dj)(),n="artifacts/".concat(u.R0,"/public/data"),{data:o,loading:m}=(0,u.Ge)((0,r.useMemo)(()=>a?(0,f.P)((0,f.rJ)(a,n,"fixedData")):null,[a])),p=(0,r.useMemo)(()=>o?Object.fromEntries(o.map(e=>[e.id,e.val])):{},[o]),{data:h,loading:b}=(0,u.Ge)((0,r.useMemo)(()=>a?(0,f.P)((0,f.rJ)(a,n,"classSubjects")):null,[a])),g=(0,r.useMemo)(()=>h?Object.fromEntries(h.map(e=>[e.id,e.val])):{},[h]),[v,w]=(0,r.useState)({isOpen:!1,key:null,value:""});if(m||b)return(0,s.jsx)(x.E,{className:"w-full h-[600px] rounded-2xl"});if(!t)return(0,s.jsx)("div",{className:"flex items-center justify-center h-96 bg-gray-50 rounded-2xl border-2 border-dashed",children:(0,s.jsx)("p",{className:"text-gray-500 text-lg font-medium",children:"학급을 선택해주세요."})});let k=async(e,t)=>{e.stopPropagation();try{await (0,N.gg)(a,t),l({title:"삭제되었습니다."})}catch(e){console.error(e),l({title:"삭제 실패",variant:"destructive"})}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Zp,{className:"shadow-lg overflow-hidden border",children:(0,s.jsx)(d.Wu,{className:"p-0",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-center border-collapse min-w-[600px]",children:[(0,s.jsx)("thead",{className:"bg-green-600 text-white text-lg font-bold",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"p-3 w-24 border-r",children:"교시"}),i.qn.map(e=>(0,s.jsx)("th",{className:"p-3 w-1/5 border-r",children:i.Rl[e]},e))]})}),(0,s.jsx)("tbody",{className:"text-base",children:i.nR.map(e=>(0,s.jsxs)("tr",{className:"border-b",children:[(0,s.jsx)("td",{className:"p-2 bg-gray-50 font-bold border-r text-sm text-center h-24",children:i.kl[e]}),i.qn.map(a=>{let r="".concat(t,"-").concat(a,"-").concat(e),l=g[r]||"",n="";for(let s in p)if(p[s]===t){let[t,r,l]=s.split("-");if(r===a&&l===e){n=i.pR[t]||"";break}}return(0,s.jsxs)("td",{className:"p-1 border-r h-24 text-center relative group cursor-pointer hover:bg-gray-50",onClick:()=>w({isOpen:!0,key:r,value:l}),children:[n&&(0,s.jsx)("div",{className:"text-xs text-blue-600 font-bold leading-tight",children:n}),(0,s.jsx)("div",{className:"text-lg font-bold text-gray-700 leading-tight mt-1",children:l}),l&&(0,s.jsx)("button",{className:"absolute top-1 right-1 bg-red-500 text-white w-6 h-6 rounded-md flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-10",onClick:e=>k(e,r),children:(0,s.jsx)(c.A,{size:16})})]},a)})]},e))})]})})})}),(0,s.jsx)(y,{isOpen:v.isOpen,onClose:()=>w({isOpen:!1,key:null,value:""}),subjectKey:v.key,currentValue:v.value,currentClass:t})]})}function k(){let e=(0,l.useSearchParams)(),t=(0,l.useRouter)(),[a,n]=(0,r.useState)(e.get("class")||"");return(0,s.jsxs)("section",{children:[(0,s.jsx)(v,{currentClass:a,onSelectClass:e=>{n(e),t.push("/class?class=".concat(e))}}),(0,s.jsx)(w,{currentClass:a})]})}function C(){return(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)(x.E,{className:"w-full h-[700px]"}),children:(0,s.jsx)(k,{})})}}},e=>{e.O(0,[992,644,909,514,49,932,234,441,255,358],()=>e(e.s=5964)),_N_E=e.O()}]);