(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[678],{893:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var r=a(5155),s=a(2115),l=a(63),n=a(3998),o=a(6948),d=a(6549),i=a(243),c=a(4269),u=a(1834),f=a(5142),x=a(5894),p=a(9516),m=a(3630),h=a(6344),g=a(9708);function b(e){let{currentTeacher:t,onSelectTeacher:a}=e;return(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mb-4 justify-center",children:d.AI.map(e=>(0,r.jsx)(n.$,{variant:"outline",className:(0,c.cn)("px-6 py-2 border-2 rounded-xl text-lg font-bold transition-all hover:bg-purple-50",t===e?"border-purple-600 bg-purple-50 text-purple-700":"bg-white"),onClick:()=>a(e),children:e},e))})}function j(e){let{isOpen:t,onClose:a,scheduleKey:l,currentValue:o,currentTeacher:d}=e,[i,c]=(0,s.useState)(""),{toast:m}=(0,x.dj)(),[g,b]=(0,s.useTransition)(),j=(0,h.jt)();s.useEffect(()=>{t&&c(o)},[t,o]);let N=()=>{l&&b(async()=>{try{await (0,p.ky)(j,l,i),m({title:"저장되었습니다."}),a()}catch(e){console.error(e),m({title:"저장 실패",variant:"destructive"})}})};return t&&l?(0,r.jsx)(u.lG,{open:t,onOpenChange:a,children:(0,r.jsxs)(u.Cf,{children:[(0,r.jsx)(u.c7,{children:(0,r.jsxs)(u.L3,{children:[d," 수업 입력"]})}),(0,r.jsx)(f.p,{value:i,onChange:e=>c(e.target.value),placeholder:"학급명 입력 후 Enter",className:"text-2xl font-bold h-14",onKeyDown:e=>{"Enter"===e.key&&N()}}),(0,r.jsxs)(u.Es,{children:[(0,r.jsx)(n.$,{variant:"outline",onClick:a,children:"취소"}),(0,r.jsx)(n.$,{onClick:N,disabled:g,children:g?"저장 중":"저장"})]})]})}):null}function N(e){let{currentTeacher:t}=e,a=(0,h.jt)(),{toast:l}=(0,x.dj)(),n="artifacts/".concat(h.R0,"/public/data"),{data:u,loading:f}=(0,h.Ge)((0,s.useMemo)(()=>a?(0,g.P)((0,g.rJ)(a,n,"fixedData")):null,[a])),b=(0,s.useMemo)(()=>u?Object.fromEntries(u.map(e=>[e.id,e.val])):{},[u]),{data:N,loading:y}=(0,h.Ge)((0,s.useMemo)(()=>a?(0,g.P)((0,g.rJ)(a,n,"teacherSchedules")):null,[a])),v=(0,s.useMemo)(()=>N?Object.fromEntries(N.map(e=>[e.id,e.val])):{},[N]),[w,k]=(0,s.useState)({isOpen:!1,key:null,value:""});if(f||y)return(0,r.jsx)(i.E,{className:"w-full h-[600px] rounded-2xl"});if(!t)return(0,r.jsx)("div",{className:"flex items-center justify-center h-96 bg-gray-50 rounded-2xl border-2 border-dashed",children:(0,r.jsx)("p",{className:"text-gray-500 text-lg font-medium",children:"교담 선생님을 선택해주세요."})});let C=async(e,t)=>{e.stopPropagation();try{await (0,p.F_)(a,t),l({title:"삭제되었습니다."})}catch(e){console.error(e),l({title:"삭제 실패",variant:"destructive"})}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Zp,{className:"shadow-lg overflow-hidden border",children:(0,r.jsx)(o.Wu,{className:"p-0",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-center border-collapse min-w-[600px]",children:[(0,r.jsx)("thead",{className:"bg-purple-600 text-white text-lg font-bold",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"p-3 w-20 sm:w-24",children:"교시"}),d.qn.map(e=>(0,r.jsx)("th",{className:"w-1/5",children:d.Rl[e]},e))]})}),(0,r.jsx)("tbody",{className:"text-xl font-bold",children:d.nR.map(e=>(0,r.jsxs)("tr",{className:"border-b",children:[(0,r.jsx)("td",{className:"p-3 border font-bold bg-gray-50 text-gray-400 text-sm text-center h-16",children:d.kl[e]}),d.qn.map(a=>{let s="".concat(t,"-").concat(a,"-").concat(e),l=v[s]||"",n="스포츠강사"===t&&b["playground-".concat(a,"-").concat(e)]===l&&""!==l;return(0,r.jsxs)("td",{className:(0,c.cn)("p-2 border h-16 text-center break-words leading-tight transition-colors relative group cursor-pointer hover:bg-gray-50",n&&"bg-yellow-200"),onClick:()=>k({isOpen:!0,key:s,value:l}),children:[l,l&&(0,r.jsx)("button",{className:"absolute top-1 right-1 bg-red-500 text-white w-6 h-6 rounded-md flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-10",onClick:e=>C(e,s),children:(0,r.jsx)(m.A,{size:16})})]},a)})]},e))})]})})})}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-4 text-center",children:"* 스포츠강사 조회 시 노란색 칸은 '운동장' 시간표와 일치하는 수업입니다."}),(0,r.jsx)(j,{isOpen:w.isOpen,onClose:()=>k({isOpen:!1,key:null,value:""}),scheduleKey:w.key,currentValue:w.value,currentTeacher:t})]})}function y(){let e=(0,l.useSearchParams)(),t=(0,l.useRouter)(),[a,n]=(0,s.useState)(e.get("teacher")||d.AI[0]);return(0,r.jsxs)("section",{children:[(0,r.jsx)(b,{currentTeacher:a,onSelectTeacher:e=>{n(e),t.push("/teacher?teacher=".concat(e))}}),(0,r.jsx)(N,{currentTeacher:a})]})}function v(){return(0,r.jsx)(s.Suspense,{fallback:(0,r.jsx)(i.E,{className:"w-full h-[700px]"}),children:(0,r.jsx)(y,{})})}},1834:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>u,Es:()=>x,L3:()=>p,c7:()=>f,lG:()=>d});var r=a(5155),s=a(2115),l=a(7283),n=a(6615),o=a(4269);let d=l.bL;l.l9;let i=l.ZL;l.bm;let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.hJ,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});c.displayName=l.hJ.displayName;let u=s.forwardRef((e,t)=>{let{className:a,children:s,...d}=e;return(0,r.jsxs)(i,{children:[(0,r.jsx)(c,{}),(0,r.jsxs)(l.UC,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...d,children:[s,(0,r.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(n.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=l.UC.displayName;let f=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};f.displayName="DialogHeader";let x=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};x.displayName="DialogFooter";let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.hE,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});p.displayName=l.hE.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.VY,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...s})}).displayName=l.VY.displayName},5142:(e,t,a)=>{"use strict";a.d(t,{p:()=>n});var r=a(5155),s=a(2115),l=a(4269);let n=s.forwardRef((e,t)=>{let{className:a,type:s,...n}=e;return(0,r.jsx)("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});n.displayName="Input"},6948:(e,t,a)=>{"use strict";a.d(t,{Wu:()=>o,Zp:()=>n});var r=a(5155),s=a(2115),l=a(4269);let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});n.displayName="Card",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...s})}).displayName="CardHeader",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})}).displayName="CardTitle",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...s})}).displayName="CardDescription";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",a),...s})});o.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},8166:(e,t,a)=>{Promise.resolve().then(a.bind(a,893))}},e=>{e.O(0,[992,644,909,514,49,932,234,441,255,358],()=>e(e.s=8166)),_N_E=e.O()}]);